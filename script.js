const net = new brain.NeuralNetwork()

const data =[{"input":{"r":0,"g":0,"b":0},"output":[1]},{"input":{"r":1,"g":1,"b":1},"output":[0]},
{"input":{"r":0.944808294257035,"g":0.6674782369918966,"b":0.5766399840934922},"output":[0]},
{"input":{"r":0.5639948440377565,"g":0.7176485901155334,"b":0.09089889404108642},"output":[1]},
{"input":{"r":0.1735805927844496,"g":0.055394078147760206,"b":0.5718893632998685},"output":[1]},
{"input":{"r":0.9981576669053267,"g":0.5599753720355853,"b":0.14004222444100312},"output":[0]},
{"input":{"r":0.19516320408209298,"g":0.19675137123292608,"b":0.6611291964504313},"output":[1]},
{"input":{"r":0.6164834530502397,"g":0.8040215937551165,"b":0.8850111600872357},"output":[0]},
{"input":{"r":0.3041418057844665,"g":0.44672594827873735,"b":0.2457621104163552},"output":[1]},
{"input":{"r":0.9700762875730256,"g":0.04347977676242154,"b":0.48983830868727063},"output":[0]},
{"input":{"r":0.5208315789104343,"g":0.7362065633265635,"b":0.7122939301003071},"output":[0]},
{"input":{"r":0.23520758286480792,"g":0.9557008141546155,"b":0.11014352211423728},"output":[0]},
{"input":{"r":0.589232622786013,"g":0.6262382467772079,"b":0.22068417769342719},"output":[1]},
{"input":{"r":0.4974235182026916,"g":0.06800405227377082,"b":0.6991588905288477},"output":[1]},
{"input":{"r":0.014012292032445028,"g":0.8366939310719097,"b":0.7852317228157895},"output":[0]},
{"input":{"r":0.6034691954439091,"g":0.995582899847562,"b":0.07976036555452626},"output":[0]},
{"input":{"r":0.3954203797322433,"g":0.9691389246293933,"b":0.5340578656677233},"output":[0]},
{"input":{"r":0.597573150116294,"g":0.6469698799143129,"b":0.14327503451373547},"output":[0]},
{"input":{"r":0.03137390761585168,"g":0.6714730771317701,"b":0.526269930102498},"output":[1]},
{"input":{"r":0.4060610880542337,"g":0.8395520707830146,"b":0.9519617868006716},"output":[0]},
{"input":{"r":0.09937849463297255,"g":0.998567114295779,"b":0.7305857380072192},"output":[0]},
{"input":{"r":0.19658225353968817,"g":0.34243367565320626,"b":0.6907903948687992},"output":[1]},
{"input":{"r":0.14183816462521293,"g":0.5768425498165213,"b":0.20904833189001226},"output":[1]},
{"input":{"r":0.1304525766950142,"g":0.15770748106098176,"b":0.1513780578868713},"output":[1]},
{"input":{"r":0.08233178944743225,"g":0.13330341221297903,"b":0.9740919835995931},"output":[1]},
{"input":{"r":0.6679568819262076,"g":0.2572629537807716,"b":0.056641327982522194},"output":[1]},
{"input":{"r":0.9775544056225354,"g":0.6484034439721735,"b":0.35002088833074785},"output":[0]},
{"input":{"r":0.4379821477793624,"g":0.8012236229142786,"b":0.9807309238569026},"output":[0]},
{"input":{"r":0.1903408797077648,"g":0.8217165591038438,"b":0.7168542544342942},"output":[1]},
{"input":{"r":0.3493291422243354,"g":0.7156906546326169,"b":0.8432935745081787},"output":[1]},
{"input":{"r":0.9105963156497519,"g":0.9959716499017874,"b":0.38457267991993893},"output":[0]},
{"input":{"r":0.5939915201365638,"g":0.2869215845407964,"b":0.6197160854239552},"output":[1]},
{"input":{"r":0.8855809221913826,"g":0.7989923584284897,"b":0.0923202306111528},"output":[0]},
{"input":{"r":0.12539452728540113,"g":0.5706183085609069,"b":0.7815710874720192},"output":[1]},
{"input":{"r":0.8421070042922896,"g":0.39352267758784554,"b":0.6694568508690559},"output":[1]},
{"input":{"r":0.20944106311420496,"g":0.6468346395610123,"b":0.7843226607693559},"output":[1]},
{"input":{"r":0.07031243882444915,"g":0.4711405791647931,"b":0.48561025653104095},"output":[1]},
{"input":{"r":0.6052583000826541,"g":0.20156965647882275,"b":0.5516845157021804},"output":[1]},
{"input":{"r":0.12764163224417513,"g":0.5829670693113922,"b":0.08695788859551268},"output":[0]},
{"input":{"r":0.19204446037129164,"g":0.007909076952812288,"b":0.06271220889623641},"output":[1]},
{"input":{"r":0.18569889548646357,"g":0.9478678466465909,"b":0.8675140157493593},"output":[0]},
{"input":{"r":0.4468179190602035,"g":0.9698379431808077,"b":0.25755295706651293},"output":[0]},
{"input":{"r":0.7465479405148723,"g":0.9041400074620396,"b":0.2042463329292794},"output":[0]},
{"input":{"r":0.6639260625445582,"g":0.7316496553600627,"b":0.30326501983044407},"output":[0]},
{"input":{"r":0.2995010289664668,"g":0.1729878398003919,"b":0.19693748026970992},"output":[1]},
  {"input":{"r":0.21414377211612878,"g":0.8718104192933755,"b":0.7463742899394781},"output":[0]},
  {"input":{"r":0.9840245972548878,"g":0.8172676068556579,"b":0.834482669571633},"output":[0]},
  {"input":{"r":0.5306755915563433,"g":0.020879905268367915,"b":0.7240937034881412},"output":[1]},
  {"input":{"r":0.9931035350200577,"g":0.6870659480365664,"b":0.00403467605024721},"output":[0]},
  {"input":{"r":0.10885335990400158,"g":0.5441764097803188,"b":0.7574352405317462},"output":[1]},
  {"input":{"r":0.8580705602703758,"g":0.2521058743728455,"b":0.7148632016643026},"output":[1]},
  {"input":{"r":0.5932249279406516,"g":0.558992706135353,"b":0.3807526201685445},"output":[1]},
{"input":{"r":0.32607325776709195,"g":0.22331822438708948,"b":0.7352911040340464},"output":[1]}]

net.train(data)

const colorEl = document.getElementById('color')
const guessEl = document.getElementById('guess')
const whiteButton = document.getElementById('white-button')
const blackButton = document.getElementById('black-button')
const printButton = document.getElementById('print-button')
let color
setRandomColor()

whiteButton.addEventListener('click', () => {
  chooseColor(1)
})

blackButton.addEventListener('click', () => {
  chooseColor(0)
})

printButton.addEventListener('click', print)

function chooseColor(value) {
  data.push({
    input: color,
    output: [value]
  })
  setRandomColor()
}

function print() {
  console.log(JSON.stringify(data))
}

function setRandomColor() {
  color = {
    r: Math.random(),
    g: Math.random(),
    b: Math.random()
  }
  const guess = net.run(color)[0]
  guessEl.style.color = guess > .5 ? '#FFF' : '#000'
  colorEl.style.backgroundColor = 
    `rgba(${color.r * 255}, ${color.g * 255}, ${color.b * 255})`
}